<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

</head>

<body>
    <style>
        body {
            background-color: #181823;
            color: #E9F8F9;
            font-family: 'Roboto', sans-serif;
            font-family: 'Ysabeau Office', sans-serif;
        }
    </style>
    <style>
        .card {
            background-color: #2a2f43;
            color: #ededed;
        }

        .lds-ellipsis {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
        }

        .lds-ellipsis div {
            position: absolute;
            top: 33px;
            width: 13px;
            height: 13px;
            border-radius: 50%;
            background: #fff;
            animation-timing-function: cubic-bezier(0, 1, 1, 0);
        }

        .lds-ellipsis div:nth-child(1) {
            left: 8px;
            animation: lds-ellipsis1 0.6s infinite;
        }

        .lds-ellipsis div:nth-child(2) {
            left: 8px;
            animation: lds-ellipsis2 0.6s infinite;
        }

        .lds-ellipsis div:nth-child(3) {
            left: 32px;
            animation: lds-ellipsis2 0.6s infinite;
        }

        .lds-ellipsis div:nth-child(4) {
            left: 56px;
            animation: lds-ellipsis3 0.6s infinite;
        }

        @keyframes lds-ellipsis1 {
            0% {
                transform: scale(0);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes lds-ellipsis3 {
            0% {
                transform: scale(1);
            }

            100% {
                transform: scale(0);
            }
        }

        @keyframes lds-ellipsis2 {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(24px, 0);
            }
        }


        .buttons {
            margin-top: 50px;
            text-align: center;
        }

        .modal {
            -webkit-backdrop-filter: blur(4px);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: rgb(12, 12, 12);
        }

        .modal-header {
            border-bottom: none !important;
        }

        .modal-footer {
            border-top: none !important;
        }

        #codeVerifier {
            text-align: center;
            display: initial;
            width: 50%;
            padding: .375rem .75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: .25rem;
            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }



        input {
            outline: none;
        }

        input[type=search] {
            -webkit-appearance: textfield;
            -webkit-box-sizing: content-box;
            font-family: inherit;
            font-size: 100%;
        }

        input::-webkit-search-decoration,
        input::-webkit-search-cancel-button {
            display: none;
        }


        input[type=search] {
            background: #ededed url(https://static.tumblr.com/ftv85bp/MIXmud4tx/search-icon.png) no-repeat 9px center;
            border: solid 1px #ccc;
            padding: 9px 10px 9px 32px;
            width: 150px;

            -webkit-border-radius: 10em;
            -moz-border-radius: 10em;
            border-radius: 10em;

            -webkit-transition: all .5s;
            -moz-transition: all .5s;
            transition: all .5s;
        }

        input[type=search]:focus {
            width: 180px;
            background-color: #fff;
            border-color: #2a2f43;

            -webkit-box-shadow: 0 0 5px rgba(28, 37, 41, 0.5);
            -moz-box-shadow: 0 0 5px rgba(28, 37, 41, 0.5);
            box-shadow: 0 0 5px rgba(28, 37, 41, 0.5);
        }


        input:-moz-placeholder {
            color: #999;
        }

        input::-webkit-input-placeholder {
            color: #999;
        }

        /* Demo 2 */
        #demo-2 input[type=search] {
            width: 15px;
            padding-left: 10px;
            color: transparent;
            cursor: pointer;
        }

        #demo-2 input[type=search]:hover {
            background-color: #fff;
        }

        #demo-2 input[type=search]:focus {
            width: 130px;
            padding-left: 32px;
            color: #000;
            background-color: #fff;
            cursor: auto;
        }

        #demo-2 input:-moz-placeholder {
            color: transparent;
        }

        #demo-2 input::-webkit-input-placeholder {
            color: transparent;
        }
    </style>
    <center>
        <br>
        <br>
        <br>
        <br>
        <br>
        <div class="container" id="err"></div>

        <% data.map((post)=>{ %>
            <div class="card mb-3" style="max-width: 640px;">
                <div class="row g-0">
                    <div class="col-md-4">
                        <div class="container">
                            <br>
                            <br>

                            <h6>Month Img</h6>

                            <img src='<%= post.image %>' class="img-fluid rounded"
                                style="padding: 10px; border-radius: 10px; " alt="Item img">
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">
                                <%= post.title %>
                            </h5>
                            <div class="row">
                                <div class="col">

                                    <h6> Id: <%= post.id %>
                                    </h6>
                                    <h6> Month: <span class="badge bg-primary">
                                            <%= post.name %>
                                        </span> </h6>
                                </div>
                                </h6>
                            </div>
                            <br>
                            <button data-bs-toggle="modal" data-bs-target="#deleteModal<%= post.id%>"
                                class="btn btn-danger w-50">Delete</button>



                            <h6> </h6>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="deleteModal<%= post.id%>" tabindex="-1" aria-labelledby="deleteModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="deleteModalLabel">Delete carousel Item</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <img src="<%= post.image %>" class="img img-fluid" alt="">
                            This will delete the item with id <span class="badge bg-primary">

                                <h6>

                                    <%= post.id %>
                                </h6>
                            </span>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button onclick="deleteItem('<%= post.id %>')" data-bs-dismiss="modal"
                                class="btn btn-danger w-50">Delete</button>

                        </div>
                    </div>
                </div>
            </div>
            <% }) %>
    </center>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        const deleteItem = (x) => {
            // const modalel = document.getElementById("deleteModal"+x)
            // const modal = new bootstrap.Modal(modalel)

            // modal.close()
            axios.post(`/api/delete/${x}`)
                .then((res) => {
                    console.log(res.data)
                    if (res.data.Success) {

                        window.location.reload()
                    }
                    else {
                        let err = document.getElementById("err")
            err.innerHTML =     ` <div class="alert alert-danger ">Unable to delete</div>` 
                        // window.location.pathname = `${res.data.url}`
                        // window.location.pathname = "/view?err=Could not delete Item Please try again. "
                    }
                })
                .catch((err) => {
                    console.log(err);
                })
        }
    </script>
    </script>
</body>

</html>